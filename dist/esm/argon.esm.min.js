import t from"argon-logger";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(t,e){return t(e={exports:{}},e.exports),e.exports}var r,o,c,a=function(t){return t&&t.Math==Math&&t},u=a("object"==typeof globalThis&&globalThis)||a("object"==typeof window&&window)||a("object"==typeof self&&self)||a("object"==typeof e&&e)||Function("return this")(),s=function(t){try{return!!t()}catch(t){return!0}},f=!s((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),l=function(t){return"object"==typeof t?null!==t:"function"==typeof t},p=u.document,h=l(p)&&l(p.createElement),d=function(t){return h?p.createElement(t):{}},y=!f&&!s((function(){return 7!=Object.defineProperty(d("div"),"a",{get:function(){return 7}}).a})),v=function(t){if(!l(t))throw TypeError(String(t)+" is not an object");return t},g=function(t,e){if(!l(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!l(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!l(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!l(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},m=Object.defineProperty,b={f:f?m:function(t,e,n){if(v(t),e=g(e,!0),v(n),y)try{return m(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},w=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},j=f?function(t,e,n){return b.f(t,e,w(1,n))}:function(t,e,n){return t[e]=n,t},S=function(t,e){try{j(u,t,e)}catch(n){u[t]=e}return e},A=u["__core-js_shared__"]||S("__core-js_shared__",{}),E=n((function(t){(t.exports=function(t,e){return A[t]||(A[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.4.1",mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})})),O={}.hasOwnProperty,T=function(t,e){return O.call(t,e)},P=E("native-function-to-string",Function.toString),L=u.WeakMap,x="function"==typeof L&&/native code/.test(P.call(L)),M=0,C=Math.random(),_=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++M+C).toString(36)},k=E("keys"),I=function(t){return k[t]||(k[t]=_(t))},N={},F=u.WeakMap;if(x){var R=new F,D=R.get,G=R.has,H=R.set;r=function(t,e){return H.call(R,t,e),e},o=function(t){return D.call(R,t)||{}},c=function(t){return G.call(R,t)}}else{var V=I("state");N[V]=!0,r=function(t,e){return j(t,V,e),e},o=function(t){return T(t,V)?t[V]:{}},c=function(t){return T(t,V)}}var q={set:r,get:o,has:c,enforce:function(t){return c(t)?o(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!l(e)||(n=o(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},z=n((function(t){var e=q.get,n=q.enforce,r=String(P).split("toString");E("inspectSource",(function(t){return P.call(t)})),(t.exports=function(t,e,o,i){var c=!!i&&!!i.unsafe,a=!!i&&!!i.enumerable,s=!!i&&!!i.noTargetGet;"function"==typeof o&&("string"!=typeof e||T(o,"name")||j(o,"name",e),n(o).source=r.join("string"==typeof e?e:"")),t!==u?(c?!s&&t[e]&&(a=!0):delete t[e],a?t[e]=o:j(t,e,o)):a?t[e]=o:S(e,o)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||P.call(this)}))})),B={}.toString,U=function(t){return B.call(t).slice(8,-1)},W=!!Object.getOwnPropertySymbols&&!s((function(){return!String(Symbol())})),$=u.Symbol,Y=E("wks"),J=function(t){return Y[t]||(Y[t]=W&&$[t]||(W?$:_)("Symbol."+t))},K=J("toStringTag"),Q="Arguments"==U(function(){return arguments}()),X=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),K))?n:Q?U(e):"Object"==(r=U(e))&&"function"==typeof e.callee?"Arguments":r},Z={};Z[J("toStringTag")]="z";var tt="[object z]"!==String(Z)?function(){return"[object "+X(this)+"]"}:Z.toString,et=Object.prototype;tt!==et.toString&&z(et,"toString",tt,{unsafe:!0});var nt,rt,ot,it=Math.ceil,ct=Math.floor,at=function(t){return isNaN(t=+t)?0:(t>0?ct:it)(t)},ut=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},st=function(t){return function(e,n){var r,o,i=String(ut(e)),c=at(n),a=i.length;return c<0||c>=a?t?"":void 0:(r=i.charCodeAt(c))<55296||r>56319||c+1===a||(o=i.charCodeAt(c+1))<56320||o>57343?t?i.charAt(c):r:t?i.slice(c,c+2):o-56320+(r-55296<<10)+65536}},ft={codeAt:st(!1),charAt:st(!0)},lt={}.propertyIsEnumerable,pt=Object.getOwnPropertyDescriptor,ht={f:pt&&!lt.call({1:2},1)?function(t){var e=pt(this,t);return!!e&&e.enumerable}:lt},dt="".split,yt=s((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==U(t)?dt.call(t,""):Object(t)}:Object,vt=function(t){return yt(ut(t))},gt=Object.getOwnPropertyDescriptor,mt={f:f?gt:function(t,e){if(t=vt(t),e=g(e,!0),y)try{return gt(t,e)}catch(t){}if(T(t,e))return w(!ht.f.call(t,e),t[e])}},bt=u,wt=function(t){return"function"==typeof t?t:void 0},jt=function(t,e){return arguments.length<2?wt(bt[t])||wt(u[t]):bt[t]&&bt[t][e]||u[t]&&u[t][e]},St=Math.min,At=function(t){return t>0?St(at(t),9007199254740991):0},Et=Math.max,Ot=Math.min,Tt=function(t){return function(e,n,r){var o,i=vt(e),c=At(i.length),a=function(t,e){var n=at(t);return n<0?Et(n+e,0):Ot(n,e)}(r,c);if(t&&n!=n){for(;c>a;)if((o=i[a++])!=o)return!0}else for(;c>a;a++)if((t||a in i)&&i[a]===n)return t||a||0;return!t&&-1}},Pt={includes:Tt(!0),indexOf:Tt(!1)},Lt=Pt.indexOf,xt=function(t,e){var n,r=vt(t),o=0,i=[];for(n in r)!T(N,n)&&T(r,n)&&i.push(n);for(;e.length>o;)T(r,n=e[o++])&&(~Lt(i,n)||i.push(n));return i},Mt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ct=Mt.concat("length","prototype"),_t={f:Object.getOwnPropertyNames||function(t){return xt(t,Ct)}},kt={f:Object.getOwnPropertySymbols},It=jt("Reflect","ownKeys")||function(t){var e=_t.f(v(t)),n=kt.f;return n?e.concat(n(t)):e},Nt=function(t,e){for(var n=It(e),r=b.f,o=mt.f,i=0;i<n.length;i++){var c=n[i];T(t,c)||r(t,c,o(e,c))}},Ft=/#|\.prototype\./,Rt=function(t,e){var n=Gt[Dt(t)];return n==Vt||n!=Ht&&("function"==typeof e?s(e):!!e)},Dt=Rt.normalize=function(t){return String(t).replace(Ft,".").toLowerCase()},Gt=Rt.data={},Ht=Rt.NATIVE="N",Vt=Rt.POLYFILL="P",qt=Rt,zt=mt.f,Bt=function(t,e){var n,r,o,i,c,a=t.target,s=t.global,f=t.stat;if(n=s?u:f?u[a]||S(a,{}):(u[a]||{}).prototype)for(r in e){if(i=e[r],o=t.noTargetGet?(c=zt(n,r))&&c.value:n[r],!qt(s?r:a+(f?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;Nt(i,o)}(t.sham||o&&o.sham)&&j(i,"sham",!0),z(n,r,i,t)}},Ut=!s((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Wt=I("IE_PROTO"),$t=Object.prototype,Yt=Ut?Object.getPrototypeOf:function(t){return t=Object(ut(t)),T(t,Wt)?t[Wt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?$t:null},Jt=J("iterator"),Kt=!1;[].keys&&("next"in(ot=[].keys())?(rt=Yt(Yt(ot)))!==Object.prototype&&(nt=rt):Kt=!0),null==nt&&(nt={}),T(nt,Jt)||j(nt,Jt,(function(){return this}));var Qt={IteratorPrototype:nt,BUGGY_SAFARI_ITERATORS:Kt},Xt=Object.keys||function(t){return xt(t,Mt)},Zt=f?Object.defineProperties:function(t,e){v(t);for(var n,r=Xt(e),o=r.length,i=0;o>i;)b.f(t,n=r[i++],e[n]);return t},te=jt("document","documentElement"),ee=I("IE_PROTO"),ne=function(){},re=function(){var t,e=d("iframe"),n=Mt.length;for(e.style.display="none",te.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),re=t.F;n--;)delete re.prototype[Mt[n]];return re()},oe=Object.create||function(t,e){var n;return null!==t?(ne.prototype=v(t),n=new ne,ne.prototype=null,n[ee]=t):n=re(),void 0===e?n:Zt(n,e)};N[ee]=!0;var ie=b.f,ce=J("toStringTag"),ae=function(t,e,n){t&&!T(t=n?t:t.prototype,ce)&&ie(t,ce,{configurable:!0,value:e})},ue={},se=Qt.IteratorPrototype,fe=function(){return this},le=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return v(n),function(t){if(!l(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),pe=Qt.IteratorPrototype,he=Qt.BUGGY_SAFARI_ITERATORS,de=J("iterator"),ye=function(){return this},ve=function(t,e,n,r,o,i,c){!function(t,e,n){var r=e+" Iterator";t.prototype=oe(se,{next:w(1,n)}),ae(t,r,!1),ue[r]=fe}(n,e,r);var a,u,s,f=function(t){if(t===o&&y)return y;if(!he&&t in h)return h[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},l=e+" Iterator",p=!1,h=t.prototype,d=h[de]||h["@@iterator"]||o&&h[o],y=!he&&d||f(o),v="Array"==e&&h.entries||d;if(v&&(a=Yt(v.call(new t)),pe!==Object.prototype&&a.next&&(Yt(a)!==pe&&(le?le(a,pe):"function"!=typeof a[de]&&j(a,de,ye)),ae(a,l,!0))),"values"==o&&d&&"values"!==d.name&&(p=!0,y=function(){return d.call(this)}),h[de]!==y&&j(h,de,y),ue[e]=y,o)if(u={values:f("values"),keys:i?y:f("keys"),entries:f("entries")},c)for(s in u)!he&&!p&&s in h||z(h,s,u[s]);else Bt({target:e,proto:!0,forced:he||p},u);return u},ge=ft.charAt,me=q.set,be=q.getterFor("String Iterator");ve(String,"String",(function(t){me(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=be(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=ge(n,r),e.index+=t.length,{value:t,done:!1})}));var we={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},je=J("unscopables"),Se=Array.prototype;null==Se[je]&&j(Se,je,oe(null));var Ae=function(t){Se[je][t]=!0},Ee=q.set,Oe=q.getterFor("Array Iterator"),Te=ve(Array,"Array",(function(t,e){Ee(this,{type:"Array Iterator",target:vt(t),index:0,kind:e})}),(function(){var t=Oe(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");ue.Arguments=ue.Array,Ae("keys"),Ae("values"),Ae("entries");var Pe=J("iterator"),Le=J("toStringTag"),xe=Te.values;for(var Me in we){var Ce=u[Me],_e=Ce&&Ce.prototype;if(_e){if(_e[Pe]!==xe)try{j(_e,Pe,xe)}catch(t){_e[Pe]=xe}if(_e[Le]||j(_e,Le,Me),we[Me])for(var ke in Te)if(_e[ke]!==Te[ke])try{j(_e,ke,Te[ke])}catch(t){_e[ke]=Te[ke]}}}var Ie=u.Promise,Ne=J("species"),Fe=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},Re=J("iterator"),De=Array.prototype,Ge=function(t,e,n){if(Fe(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},He=J("iterator"),Ve=function(t,e,n,r){try{return r?e(v(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&v(o.call(t)),e}},qe=n((function(t){var e=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,n,r,o,i){var c,a,u,s,f,l,p,h,d=Ge(n,r,o?2:1);if(i)c=t;else{if("function"!=typeof(a=function(t){if(null!=t)return t[He]||t["@@iterator"]||ue[X(t)]}(t)))throw TypeError("Target is not iterable");if(void 0!==(h=a)&&(ue.Array===h||De[Re]===h)){for(u=0,s=At(t.length);s>u;u++)if((f=o?d(v(p=t[u])[0],p[1]):d(t[u]))&&f instanceof e)return f;return new e(!1)}c=a.call(t)}for(l=c.next;!(p=l.call(c)).done;)if("object"==typeof(f=Ve(c,d,p.value,o))&&f&&f instanceof e)return f;return new e(!1)}).stop=function(t){return new e(!0,t)}})),ze=J("iterator"),Be=!1;try{var Ue=0,We={next:function(){return{done:!!Ue++}},return:function(){Be=!0}};We[ze]=function(){return this},Array.from(We,(function(){throw 2}))}catch(t){}var $e,Ye,Je,Ke=J("species"),Qe=function(t,e){var n,r=v(t).constructor;return void 0===r||null==(n=v(r)[Ke])?e:Fe(n)},Xe=jt("navigator","userAgent")||"",Ze=/(iphone|ipod|ipad).*applewebkit/i.test(Xe),tn=u.location,en=u.setImmediate,nn=u.clearImmediate,rn=u.process,on=u.MessageChannel,cn=u.Dispatch,an=0,un={},sn=function(t){if(un.hasOwnProperty(t)){var e=un[t];delete un[t],e()}},fn=function(t){return function(){sn(t)}},ln=function(t){sn(t.data)},pn=function(t){u.postMessage(t+"",tn.protocol+"//"+tn.host)};en&&nn||(en=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return un[++an]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},$e(an),an},nn=function(t){delete un[t]},"process"==U(rn)?$e=function(t){rn.nextTick(fn(t))}:cn&&cn.now?$e=function(t){cn.now(fn(t))}:on&&!Ze?(Je=(Ye=new on).port2,Ye.port1.onmessage=ln,$e=Ge(Je.postMessage,Je,1)):!u.addEventListener||"function"!=typeof postMessage||u.importScripts||s(pn)?$e="onreadystatechange"in d("script")?function(t){te.appendChild(d("script")).onreadystatechange=function(){te.removeChild(this),sn(t)}}:function(t){setTimeout(fn(t),0)}:($e=pn,u.addEventListener("message",ln,!1)));var hn,dn,yn,vn,gn,mn,bn,wn,jn={set:en,clear:nn},Sn=mt.f,An=jn.set,En=u.MutationObserver||u.WebKitMutationObserver,On=u.process,Tn=u.Promise,Pn="process"==U(On),Ln=Sn(u,"queueMicrotask"),xn=Ln&&Ln.value;xn||(hn=function(){var t,e;for(Pn&&(t=On.domain)&&t.exit();dn;){e=dn.fn,dn=dn.next;try{e()}catch(t){throw dn?vn():yn=void 0,t}}yn=void 0,t&&t.enter()},Pn?vn=function(){On.nextTick(hn)}:En&&!Ze?(gn=!0,mn=document.createTextNode(""),new En(hn).observe(mn,{characterData:!0}),vn=function(){mn.data=gn=!gn}):Tn&&Tn.resolve?(bn=Tn.resolve(void 0),wn=bn.then,vn=function(){wn.call(bn,hn)}):vn=function(){An.call(u,hn)});var Mn,Cn,_n=xn||function(t){var e={fn:t,next:void 0};yn&&(yn.next=e),dn||(dn=e,vn()),yn=e},kn=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=Fe(e),this.reject=Fe(n)},In={f:function(t){return new kn(t)}},Nn=function(t,e){if(v(t),l(e)&&e.constructor===t)return e;var n=In.f(t);return(0,n.resolve)(e),n.promise},Fn=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Rn=u.process,Dn=Rn&&Rn.versions,Gn=Dn&&Dn.v8;Gn?Cn=(Mn=Gn.split("."))[0]+Mn[1]:Xe&&(!(Mn=Xe.match(/Edge\/(\d+)/))||Mn[1]>=74)&&(Mn=Xe.match(/Chrome\/(\d+)/))&&(Cn=Mn[1]);var Hn,Vn,qn,zn,Bn=Cn&&+Cn,Un=jn.set,Wn=J("species"),$n="Promise",Yn=q.get,Jn=q.set,Kn=q.getterFor($n),Qn=Ie,Xn=u.TypeError,Zn=u.document,tr=u.process,er=E("inspectSource"),nr=jt("fetch"),rr=In.f,or=rr,ir="process"==U(tr),cr=!!(Zn&&Zn.createEvent&&u.dispatchEvent),ar=qt($n,(function(){var t=er(Qn)!==String(Qn);if(66===Bn)return!0;if(!t&&!ir&&"function"!=typeof PromiseRejectionEvent)return!0;if(Bn>=51&&/native code/.test(Qn))return!1;var e=Qn.resolve(1),n=function(t){t((function(){}),(function(){}))};return(e.constructor={})[Wn]=n,!(e.then((function(){}))instanceof n)})),ur=ar||!function(t,e){if(!e&&!Be)return!1;var n=!1;try{var r={};r[ze]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}((function(t){Qn.all(t).catch((function(){}))})),sr=function(t){var e;return!(!l(t)||"function"!=typeof(e=t.then))&&e},fr=function(t,e,n){if(!e.notified){e.notified=!0;var r=e.reactions;_n((function(){for(var o=e.value,i=1==e.state,c=0;r.length>c;){var a,u,s,f=r[c++],l=i?f.ok:f.fail,p=f.resolve,h=f.reject,d=f.domain;try{l?(i||(2===e.rejection&&dr(t,e),e.rejection=1),!0===l?a=o:(d&&d.enter(),a=l(o),d&&(d.exit(),s=!0)),a===f.promise?h(Xn("Promise-chain cycle")):(u=sr(a))?u.call(a,p,h):p(a)):h(o)}catch(t){d&&!s&&d.exit(),h(t)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&pr(t,e)}))}},lr=function(t,e,n){var r,o;cr?((r=Zn.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),u.dispatchEvent(r)):r={promise:e,reason:n},(o=u["on"+t])?o(r):"unhandledrejection"===t&&function(t,e){var n=u.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},pr=function(t,e){Un.call(u,(function(){var n,r=e.value;if(hr(e)&&(n=Fn((function(){ir?tr.emit("unhandledRejection",r,t):lr("unhandledrejection",t,r)})),e.rejection=ir||hr(e)?2:1,n.error))throw n.value}))},hr=function(t){return 1!==t.rejection&&!t.parent},dr=function(t,e){Un.call(u,(function(){ir?tr.emit("rejectionHandled",t):lr("rejectionhandled",t,e.value)}))},yr=function(t,e,n,r){return function(o){t(e,n,o,r)}},vr=function(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,fr(t,e,!0))},gr=function(t,e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(t===n)throw Xn("Promise can't be resolved itself");var o=sr(n);o?_n((function(){var r={done:!1};try{o.call(n,yr(gr,t,r,e),yr(vr,t,r,e))}catch(n){vr(t,r,n,e)}})):(e.value=n,e.state=1,fr(t,e,!1))}catch(n){vr(t,{done:!1},n,e)}}};ar&&(Qn=function(t){!function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation")}(this,Qn,$n),Fe(t),Hn.call(this);var e=Yn(this);try{t(yr(gr,this,e),yr(vr,this,e))}catch(t){vr(this,e,t)}},(Hn=function(t){Jn(this,{type:$n,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=function(t,e,n){for(var r in e)z(t,r,e[r],n);return t}(Qn.prototype,{then:function(t,e){var n=Kn(this),r=rr(Qe(this,Qn));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=ir?tr.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&fr(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Vn=function(){var t=new Hn,e=Yn(t);this.promise=t,this.resolve=yr(gr,t,e),this.reject=yr(vr,t,e)},In.f=rr=function(t){return t===Qn||t===qn?new Vn(t):or(t)},"function"==typeof Ie&&(zn=Ie.prototype.then,z(Ie.prototype,"then",(function(t,e){var n=this;return new Qn((function(t,e){zn.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof nr&&Bt({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return Nn(Qn,nr.apply(u,arguments))}}))),Bt({global:!0,wrap:!0,forced:ar},{Promise:Qn}),ae(Qn,$n,!1),function(t){var e=jt(t),n=b.f;f&&e&&!e[Ne]&&n(e,Ne,{configurable:!0,get:function(){return this}})}($n),qn=jt($n),Bt({target:$n,stat:!0,forced:ar},{reject:function(t){var e=rr(this);return e.reject.call(void 0,t),e.promise}}),Bt({target:$n,stat:!0,forced:ar},{resolve:function(t){return Nn(this,t)}}),Bt({target:$n,stat:!0,forced:ur},{all:function(t){var e=this,n=rr(e),r=n.resolve,o=n.reject,i=Fn((function(){var n=Fe(e.resolve),i=[],c=0,a=1;qe(t,(function(t){var u=c++,s=!1;i.push(void 0),a++,n.call(e,t).then((function(t){s||(s=!0,i[u]=t,--a||r(i))}),o)})),--a||r(i)}));return i.error&&o(i.value),n.promise},race:function(t){var e=this,n=rr(e),r=n.reject,o=Fn((function(){var o=Fe(e.resolve);qe(t,(function(t){o.call(e,t).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}}),Bt({target:"Promise",stat:!0},{allSettled:function(t){var e=this,n=In.f(e),r=n.resolve,o=n.reject,i=Fn((function(){var n=Fe(e.resolve),o=[],i=0,c=1;qe(t,(function(t){var a=i++,u=!1;o.push(void 0),c++,n.call(e,t).then((function(t){u||(u=!0,o[a]={status:"fulfilled",value:t},--c||r(o))}),(function(t){u||(u=!0,o[a]={status:"rejected",reason:t},--c||r(o))}))})),--c||r(o)}));return i.error&&o(i.value),n.promise}}),Bt({target:"Promise",proto:!0,real:!0},{finally:function(t){var e=Qe(this,jt("Promise")),n="function"==typeof t;return this.then(n?function(n){return Nn(e,t()).then((function(){return n}))}:t,n?function(n){return Nn(e,t()).then((function(){throw n}))}:t)}}),"function"!=typeof Ie||Ie.prototype.finally||z(Ie.prototype,"finally",jt("Promise").prototype.finally);bt.Promise;var mr=q.set,br=q.getterFor("AggregateError"),wr=function(t,e){var n=this;if(!(n instanceof wr))return new wr(t,e);le&&(n=le(new Error(e),Yt(n)));var r=[];return qe(t,r.push,r),f?mr(n,{errors:r,type:"AggregateError"}):n.errors=r,void 0!==e&&j(n,"message",String(e)),n};wr.prototype=oe(Error.prototype,{constructor:w(5,wr),message:w(5,""),name:w(5,"AggregateError")}),f&&b.f(wr.prototype,"errors",{get:function(){return br(this).errors},configurable:!0}),Bt({global:!0},{AggregateError:wr}),Bt({target:"Promise",stat:!0},{try:function(t){var e=In.f(this),n=Fn(t);return(n.error?e.reject:e.resolve)(n.value),e.promise}});Bt({target:"Promise",stat:!0},{any:function(t){var e=this,n=In.f(e),r=n.resolve,o=n.reject,i=Fn((function(){var n=Fe(e.resolve),i=[],c=0,a=1,u=!1;qe(t,(function(t){var s=c++,f=!1;i.push(void 0),a++,n.call(e,t).then((function(t){f||u||(u=!0,r(t))}),(function(t){f||u||(f=!0,i[s]=t,--a||o(new(jt("AggregateError"))(i,"No one promise resolved")))}))})),--a||o(new(jt("AggregateError"))(i,"No one promise resolved"))}));return i.error&&o(i.value),n.promise}});const jr="init.core",Sr="Promise returned an invalid response.\nFollowing are the valid signatures:\n1. { template, target, data }\n2. { template, target, error },\n3. { target, html }",Ar="Couldn't resolve target reference.",Er='HTML or Promise returned by "render" method is invalid.\nHint: If you are using "render.fn" module to render components, use spread operator while combining it with regular HTML:\ne.g. return [\'<div>Regular HTML</div>\', ...render.fn({ ... })];';var Or=Pt.includes;Bt({target:"Array",proto:!0},{includes:function(t){return Or(this,t,arguments.length>1?arguments[1]:void 0)}}),Ae("includes");var Tr,Pr,Lr=Function.call;Tr="includes",Ge(Lr,u["Array"].prototype[Tr],Pr);if(void 0===window.CustomEvent){const t=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n};t.prototype=window.Event.prototype,window.CustomEvent=t}function xr(t){return"string"==typeof t||t instanceof _r||t instanceof Node||t instanceof NodeList||Array.isArray(t)}function Mr(t){return t&&"object"==typeof t?JSON.stringify(t):t}function Cr(t){let e="";if("string"==typeof t)for(i=0;i<t.length;i++)t.charCodeAt(i)>=65&&t.charCodeAt(i)<=90?e+=`-${t.charAt(i).toLowerCase()}`:e+=t.charAt(i);return e}class _r{constructor(t,e){if(this.length=0,xr(t)){if("string"==typeof t){const n="<"===t.trim().charAt(0);if(e=e||n)if(n){const e=document.createElement("div");e.innerHTML=t,t=e.childNodes}else{const e=document.createDocumentFragment();e.appendChild(document.createTextNode(t)),t=[e]}else t=document.querySelectorAll(t)}t instanceof Node&&(t=[t]);for(let e=0;e<t.length;e++)[1,9,11].includes(t[e].nodeType)&&(this[this.length++]=t[e])}}trigger(t,e){return this.each(n=>{const r=new window.CustomEvent(t,{bubbles:!0,cancelable:!0,detail:e||[]});n.dispatchEvent(r)}),this}on(t,e,n,r,o){const i=this;return 2===arguments.length&&(r=e,e=void 0),3===arguments.length&&("boolean"==typeof n&&(o=n,r=e,e=n=void 0),"function"==typeof n&&(r=n,xr(e)?n=void 0:(n=e,e=void 0))),4===arguments.length&&"boolean"==typeof r&&(o=r,r=n,xr(e)?n=void 0:(n=e,e=void 0)),this.each(c=>{c.addEventListener(t,(function(t){t.data=n;let o=[t];if(Array.isArray(t.detail)&&(o=o.concat(t.detail)),e){const n=i.find(e).add(i).has(t.target);n.length&&r.apply(n[0],o)}else r.apply(this,o)}),o)}),this}html(t){return void 0===t?this.map(t=>t.innerHTML).join(""):(null!==t&&this.each(e=>{e.innerHTML=t.toString()}),this)}append(t){return this.each((e,n)=>{new _r(t,"string"==typeof t).clone(0===n).each(t=>{e.appendChild(t)})}),this}prepend(t){const e=this.children().detach();this.append(t).append(e)}detach(){const t=document.createDocumentFragment();return this.each(e=>{t.appendChild(e)}),new _r([t])}children(){const t=[];return this.each(e=>{t.push(...e.childNodes)}),new _r(t)}has(t){const e=new _r(t),n=[];return this.each(t=>{e.each(e=>{t!==e&&!t.contains(e)||n.includes(t)||n.push(t)})}),new _r(n)}contains(t){return this.has(t).length>0}filter(t){const e=new _r;return"function"==typeof t&&this.each((n,r)=>{t.apply(n,[n,r])&&(e[e.length++]=n)}),e}clone(t){return t?this:new _r(this.map(t=>t.cloneNode(!0)))}map(t){const e=[];return"function"==typeof t&&this.each((n,r)=>{e.push(t.apply(n,[n,r]))}),e}each(t){if("function"==typeof t)for(let e=0;e<this.length;e++)t.apply(this[e],[this[e],e]);return this}find(t){const e=[];return"string"==typeof t&&this.each(n=>{new _r(n.querySelectorAll(t)).each(t=>{e.includes(t)||e.push(t)})}),new _r(e)}data(t,e){if(1===arguments.length){if("string"==typeof t)return this.attr(`data-${Cr(t)}`);if(t&&"object"==typeof t){const e={};Object.keys(t).forEach(n=>{e[`data-${Cr(n)}`]=t[n]}),this.attr(e)}return this}return 2===arguments.length&&this.attr(`data-${Cr(t)}`,e),this}attr(t,e){return 1===arguments.length?"string"==typeof t?function(t){if("string"==typeof t)try{return JSON.parse(t)}catch(t){}return t}(this[0].getAttribute("key")):(t&&"object"==typeof t&&Object.keys(t).forEach(e=>{this[0].setAttribute(Cr(e),Mr(t[e]))}),this):(2===arguments.length&&"string"==typeof t&&this[0].setAttribute(Cr(t),Mr(e)),this)}add(t){return new _r(t).each(t=>{this.filter(e=>e===t).length||(this[this.length++]=t)}),this}}function kr(){return new _r(...arguments)}const Ir=new t,Nr=kr(document.body);function Fr(t,e){const n=kr(e||this.root);n[n.data("rendered")?"append":"html"](t),n.data("rendered",!0)}function Rr(t){const e=kr(t);return 1===e.length&&e[0]===this.root?kr(this.root):kr(this.root).find(t)}function Dr(t){try{const e=Rr.apply(this,[t.target]),n=t.data||t.error,r=t.template;let o=t.html;if(!e.length)throw new Error(Ar);o=r?r(n):Mr(n),Fr.apply(this,[o,e]),Nr.trigger(jr,[this.root])}catch(t){Ir.error("[Argon]:",t)}}function Gr(t){(Array.isArray(t)?t:[t]).forEach(t=>{if("string"==typeof t)Fr.apply(this,[t]),Nr.trigger(jr,[this.root]);else if("function"==typeof t)Fr.apply(this,[t()]),Nr.trigger(jr,[this.root]);else if(t&&"object"==typeof t){if(Array.isArray(t))throw new TypeError(Sr);Dr.apply(this,[t])}})}function Hr(t){t.then(t=>{Gr.apply(this,[t])}).catch(t=>{"function"==typeof this.onError&&(Gr.apply(this,[t]),this.onError(t))})}function Vr(t){try{if("string"==typeof t)Fr.apply(this,[t]);else if("function"==typeof t)Fr.apply(this,[t()]);else{if(!Array.isArray(t)&&!t.then)throw new TypeError(Er);(t=t.length?t:[t]).forEach(t=>{if("string"==typeof t)Fr.apply(this,[t]);else if("function"==typeof t)Fr.apply(this,[t()]);else{if(!t.then)throw new TypeError(Er);Hr.apply(this,[t])}})}}catch(t){Ir.error("[Argon]:",t)}}class qr{constructor({root:t,parent:e}){this.root=t,this.parent=e}init(){"function"==typeof this.doInit&&this.doInit(this.root,this.parent),"function"==typeof this.render&&Vr.apply(this,[this.render()])}}export{qr as Component};
